<div class="bg-white flex justify-center px-4">
  <div class="w-full max-w-3xl py-6 space-y-6">
    <!-- Home Button -->
    <button
      (click)="goHome()"
      class="bg-rose-300 border-b-4 border-rose-400 text-white font-bold py-1 px-4 rounded-2xl"
    >
      <i class="fa-solid fa-house"></i> Home
    </button>

    <!-- Header -->
    <header class="flex items-center justify-between">
      <h1 class="text-lg font-extrabold text-gray-800">
        {{ courseName }}
      </h1>

      <div class="flex items-center gap-1 bg-rose-100 px-3 py-1 rounded-full">
        <span class="text-red-500">❤️</span>
        <span class="font-semibold text-sm">
          {{ heartsRemaining }}
        </span>
      </div>
    </header>

    <!-- Unit Card -->
    <section
      class="bg-[#f66f3b] text-white rounded-2xl p-4 shadow"
    >
      <p class="text-xs font-semibold opacity-90">
        {{ sectionTitle }} • {{ unitTitle }}
      </p>

      <h2 class="text-base font-bold mt-1">
        {{ unitDescription }}
      </h2>
    </section>

    <!-- Lessons -->
    <section class="space-y-4">
      <h3 class="text-sm font-bold text-gray-600 text-center">
        Lessons
      </h3>

      <div class="flex flex-col items-center gap-6">
        @for (lesson of lessons; track lesson.id) {

        <div class="flex flex-col items-center gap-1">
          <button
            (click)="openLesson(lesson)"
            class="relative w-28 h-28 rounded-full
                   flex items-center justify-center
                   border-b-8 lesson-button transition-all"
            [class.bg-[#f66f3b]]="lesson.progress !== 'Locked'"
            [class.border-[#ce5242]]="lesson.progress !== 'Locked'"
            [class.bg-gray-300]="lesson.progress === 'Locked'"
            [class.border-gray-400]="lesson.progress === 'Locked'"
            [class.cursor-not-allowed]="lesson.progress === 'Locked'"
            [attr.data-locked]="lesson.progress === 'Locked'"
          ></button>

          <span
            class="text-xs font-semibold"
            [class.text-gray-400]="lesson.progress === 'Locked'"
            [class.text-gray-700]="lesson.progress !== 'Locked'"
          >
            {{ lesson.title }}
          </span>
        </div>

        }
      </div>
    </section>
  </div>
</div>

<style>
  .lesson-button {
    position: relative;
    overflow: visible;
  }

  .lesson-button::before,
  .lesson-button::after {
    content: '';
    position: absolute;
    top: -6px;
    width: 0;
    height: 0;
    border-left: 18px solid transparent;
    border-right: 18px solid transparent;
    border-bottom: 18px solid;
  }

  .lesson-button::before {
    left: 6px;
    transform: rotate(-30deg);
  }

  .lesson-button::after {
    right: 6px;
    transform: rotate(30deg);
  }

  .lesson-button[data-locked='true']::before,
  .lesson-button[data-locked='true']::after {
    border-bottom-color: #c1c1c1;
  }

  .lesson-button:not([data-locked='true'])::before,
  .lesson-button:not([data-locked='true'])::after {
    border-bottom-color: #ce5242;
  }
</style>
